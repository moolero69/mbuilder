import{r as n,j as a}from"./app-nCFXlkF6.js";import{u as D,P as j}from"./index-CunUFvtd.js";import{u as M,c as z,a as R,P as O,b as A}from"./index-BClyipIW.js";import{c as B}from"./button-BKqQINge.js";import{C as H}from"./check-DK13V4FG.js";function K(e){const t=n.useRef({value:e,previous:e});return n.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var E="Checkbox",[L,W]=z(E),[q,T]=L(E),w=n.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:u,checked:p,defaultChecked:s,required:h,disabled:d,value:k="on",onCheckedChange:x,form:l,...C}=e,[c,m]=n.useState(null),v=D(t,o=>m(o)),y=n.useRef(!1),P=c?l||!!c.closest("form"):!0,[f=!1,g]=M({prop:p,defaultProp:s,onChange:x}),_=n.useRef(f);return n.useEffect(()=>{const o=c==null?void 0:c.form;if(o){const b=()=>g(_.current);return o.addEventListener("reset",b),()=>o.removeEventListener("reset",b)}},[c,g]),a.jsxs(q,{scope:r,state:f,disabled:d,children:[a.jsx(j.button,{type:"button",role:"checkbox","aria-checked":i(f)?"mixed":f,"aria-required":h,"data-state":N(f),"data-disabled":d?"":void 0,disabled:d,value:k,...C,ref:v,onKeyDown:R(e.onKeyDown,o=>{o.key==="Enter"&&o.preventDefault()}),onClick:R(e.onClick,o=>{g(b=>i(b)?!0:!b),P&&(y.current=o.isPropagationStopped(),y.current||o.stopPropagation())})}),P&&a.jsx(X,{control:c,bubbles:!y.current,name:u,value:k,checked:f,required:h,disabled:d,form:l,style:{transform:"translateX(-100%)"},defaultChecked:i(s)?!1:s})]})});w.displayName=E;var S="CheckboxIndicator",I=n.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:u,...p}=e,s=T(S,r);return a.jsx(O,{present:u||i(s.state)||s.state===!0,children:a.jsx(j.span,{"data-state":N(s.state),"data-disabled":s.disabled?"":void 0,...p,ref:t,style:{pointerEvents:"none",...e.style}})})});I.displayName=S;var X=e=>{const{control:t,checked:r,bubbles:u=!0,defaultChecked:p,...s}=e,h=n.useRef(null),d=K(r),k=A(t);n.useEffect(()=>{const l=h.current,C=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(C,"checked").set;if(d!==r&&m){const v=new Event("click",{bubbles:u});l.indeterminate=i(r),m.call(l,i(r)?!1:r),l.dispatchEvent(v)}},[d,r,u]);const x=n.useRef(i(r)?!1:r);return a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:p??x.current,...s,tabIndex:-1,ref:h,style:{...e.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function i(e){return e==="indeterminate"}function N(e){return i(e)?"indeterminate":e?"checked":"unchecked"}var F=w,$=I;function Y({className:e,...t}){return a.jsx(F,{"data-slot":"checkbox",className:B("peer border-input data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:a.jsx($,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:a.jsx(H,{className:"size-3.5"})})})}export{Y as C};
